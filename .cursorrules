# ğŸ¢ ZUCARMEX - Sistema de AutomatizaciÃ³n de Pruebas

# Reglas para Cursor AI - Framework de Testing Automatizado

## ğŸ¯ PropÃ³sito del Proyecto

Este es un sistema de automatizaciÃ³n de pruebas para la aplicaciÃ³n Credicam de Zucarmex, construido con:

-   **Framework**: Behave (BDD) + Selenium WebDriver
-   **PatrÃ³n**: Page Object Model (POM)
-   **Lenguaje**: Python 3.8+
-   **Navegador**: Google Chrome
-   **AutenticaciÃ³n**: OKTA con 2FA hÃ­brido

## ğŸ“‹ Estructura del Proyecto

### Directorios Principales

```
ZUCARMEX_CURSOR/
â”œâ”€â”€ features/              # Tests en Gherkin (.feature)
â”œâ”€â”€ pages/                 # Page Objects (POM)
â”œâ”€â”€ locators/              # Selectores web organizados
â”œâ”€â”€ utils/                 # Utilidades del framework
â”œâ”€â”€ logs/                  # Logs organizados por fecha/feature
â”œâ”€â”€ reports/               # Reportes HTML/JSON/JUnit
â”œâ”€â”€ evidences/             # Screenshots organizados
â”œâ”€â”€ pdfs/                  # Documentos PDF para clientes
â””â”€â”€ docs/                  # DocumentaciÃ³n automÃ¡tica
```

### Archivos de ConfiguraciÃ³n

-   `config.json` - ConfiguraciÃ³n principal (URLs, credenciales, timeouts)
-   `behave.ini` - ConfiguraciÃ³n de Behave
-   `requirements.txt` - Dependencias Python
-   `run_tests.py` - Script principal de ejecuciÃ³n

## ğŸ¤– Reglas para AutomatizaciÃ³n de Pruebas

### 1. ğŸ“ CreaciÃ³n de Nuevas Pruebas Automatizadas

#### Proceso EstÃ¡ndar:

1. **AnÃ¡lisis del Requerimiento**:

    - Recibir documento con imÃ¡genes e indicaciones
    - Identificar flujos de usuario y casos de prueba
    - Mapear elementos de la UI

2. **ValidaciÃ³n Previa**:

    - Verificar que los elementos existan en la pÃ¡gina
    - Comprobar selectores actuales vs requeridos
    - Detectar cambios en la UI automÃ¡ticamente

3. **ReutilizaciÃ³n de CÃ³digo**:

    - Buscar funcionalidades existentes en `pages/` y `locators/`
    - Reutilizar mÃ©todos comunes en `utils/`
    - Solo crear cÃ³digo nuevo si no existe funcionalidad similar

4. **ImplementaciÃ³n**:
    - Crear/actualizar locators en `locators/`
    - Implementar mÃ©todos en `pages/`
    - Escribir steps en `features/steps/`
    - Crear feature file en `features/`

### 2. ğŸ” ValidaciÃ³n AutomÃ¡tica de Elementos

#### Antes de Ejecutar Cualquier Prueba:

```python
# Verificar elementos crÃ­ticos
def validate_page_elements(driver, locators):
    """Valida que los elementos existan antes de ejecutar"""
    missing_elements = []
    for name, locator in locators.items():
        try:
            WebDriverWait(driver, 5).until(
                EC.presence_of_element_located(locator)
            )
        except TimeoutException:
            missing_elements.append(name)

    if missing_elements:
        raise ElementValidationError(f"Elementos faltantes: {missing_elements}")
```

#### DetecciÃ³n de Cambios en UI:

-   Comparar selectores actuales con los esperados
-   Generar alertas si elementos no se encuentran
-   Sugerir correcciones automÃ¡ticas cuando sea posible

### 3. ğŸ”„ ReutilizaciÃ³n de CÃ³digo Existente

#### Buscar Primero en:

1. **`pages/`** - MÃ©todos de interacciÃ³n con pÃ¡ginas
2. **`locators/`** - Selectores ya definidos
3. **`utils/`** - Funciones auxiliares comunes
4. **`features/steps/`** - Steps ya implementados

#### Patrones de ReutilizaciÃ³n:

```python
# âœ… BUENO: Reutilizar mÃ©todo existente
def login_user(self, username, password):
    return self.login_page.login(username, password)

# âŒ MALO: Duplicar funcionalidad
def login_user_again(self, username, password):
    # CÃ³digo duplicado...
```

### 4. ğŸ“Š GeneraciÃ³n de Logs Organizados

#### Estructura de Logs:

```
logs/
â”œâ”€â”€ 2025-01-04/                    # Fecha de ejecuciÃ³n
â”‚   â”œâ”€â”€ alta_catalogo/             # Nombre del feature
â”‚   â”‚   â”œâ”€â”€ SUCCESS_20250104_101530.log
â”‚   â”‚   â”œâ”€â”€ FAILED_20250104_102030.log
â”‚   â”‚   â””â”€â”€ PARTIAL_20250104_103045.log
â”‚   â””â”€â”€ otro_feature/
â””â”€â”€ 2025-01-05/
```

#### Contenido de Logs:

-   Timestamp preciso de cada acciÃ³n
-   Detalles de errores con contexto
-   Screenshots automÃ¡ticos en fallos
-   InformaciÃ³n del navegador y entorno
-   Stack trace completo para debugging

### 5. ğŸ“¸ Sistema de Evidencias

#### Captura AutomÃ¡tica:

-   Screenshot al inicio de cada step
-   Captura en caso de error
-   Evidencias de validaciones importantes
-   Estado final de la ejecuciÃ³n

#### OrganizaciÃ³n:

```
evidences/
â”œâ”€â”€ 2025-01-04/
â”‚   â”œâ”€â”€ alta_catalogo/
â”‚   â”‚   â”œâ”€â”€ EXITOSOS/
â”‚   â”‚   â”œâ”€â”€ FALLIDOS/
â”‚   â”‚   â””â”€â”€ PARCIALES/
```

### 6. ğŸ“„ GeneraciÃ³n de PDFs para Cliente

#### AutomÃ¡tico al Finalizar:

-   PDF con evidencias y pasos ejecutados
-   AnÃ¡lisis detallado de fallos (si aplica)
-   Recomendaciones de soluciÃ³n
-   Organizado por fecha/feature/resultado

#### Estructura PDF:

```
pdfs/
â”œâ”€â”€ 2025_01_04/
â”‚   â”œâ”€â”€ alta_catalogo/
â”‚   â”‚   â”œâ”€â”€ EXITOSOS/
â”‚   â”‚   â”œâ”€â”€ FALLIDOS/
â”‚   â”‚   â””â”€â”€ PARCIALES/
```

## ğŸ› ï¸ Comandos y Herramientas

### EjecuciÃ³n de Pruebas:

```bash
# Ejecutar todas las pruebas
python run_tests.py

# Ejecutar feature especÃ­fico
python run_tests.py --feature alta_catalogo

# Generar reporte HTML
python run_tests.py --format html

# Verificar dependencias
python run_tests.py --check-deps

# Listar features disponibles
python run_tests.py --list-features
```

### ValidaciÃ³n de Elementos:

```bash
# Verificar elementos antes de ejecutar
python -c "from utils.element_validator import validate_all_elements; validate_all_elements()"
```

## ğŸ¨ EstÃ¡ndares de CÃ³digo

### Naming Conventions:

-   **Features**: `snake_case.feature`
-   **Pages**: `snake_case_page.py`
-   **Locators**: `snake_case_locators.py`
-   **Steps**: `snake_case_steps.py`

### Estructura de Page Objects:

```python
class LoginPage:
    def __init__(self, driver):
        self.driver = driver
        self.locators = LoginLocators()

    def login(self, username, password):
        """MÃ©todo principal de login"""
        # ImplementaciÃ³n...
```

### Estructura de Steps:

```python
@given('que el usuario estÃ¡ en la pÃ¡gina de login')
def step_user_on_login_page(context):
    """Step para navegar a login"""
    # ImplementaciÃ³n...
```

## ğŸ”§ ConfiguraciÃ³n de Entornos

### URLs por Entorno:

-   **DEV**: `https://credicam-dev.zucarmex.com/login`
-   **QA**: `https://credicam-qa.zucarmex.com/login`

### Credenciales:

-   Configuradas en `config.json`
-   Soporte para 2FA con OKTA
-   Flujo hÃ­brido manual/automÃ¡tico

## ğŸ“‹ Checklist para Nuevas Pruebas

### Antes de Implementar:

-   [ ] Â¿Existe funcionalidad similar en el cÃ³digo actual?
-   [ ] Â¿Los elementos de la UI estÃ¡n disponibles?
-   [ ] Â¿Se necesita crear nuevos locators?
-   [ ] Â¿Se puede reutilizar cÃ³digo existente?

### Durante la ImplementaciÃ³n:

-   [ ] Seguir Page Object Model
-   [ ] Usar WebDriverWait para elementos dinÃ¡micos
-   [ ] Implementar manejo de errores robusto
-   [ ] Agregar logging detallado
-   [ ] Capturar screenshots en puntos clave

### DespuÃ©s de Implementar:

-   [ ] Ejecutar prueba en entorno aislado
-   [ ] Verificar que los logs se generen correctamente
-   [ ] Confirmar que las evidencias se capturen
-   [ ] Validar que el PDF se genere automÃ¡ticamente
-   [ ] Documentar cualquier funcionalidad nueva

## ğŸš¨ Manejo de Errores

### Tipos de Errores Comunes:

1. **Elementos No Encontrados**: Actualizar locators
2. **Timeouts**: Ajustar tiempos de espera
3. **Cambios en UI**: Validar selectores
4. **Problemas de Red**: Implementar reintentos
5. **Datos de Prueba**: Verificar credenciales

### Proceso de ResoluciÃ³n:

1. Revisar log detallado
2. Examinar screenshots del error
3. Verificar elementos en la pÃ¡gina
4. Actualizar cÃ³digo si es necesario
5. Re-ejecutar prueba

## ğŸ“ Soporte y Recursos

### DocumentaciÃ³n:

-   `README.md` - InformaciÃ³n general
-   `MANUAL_INSTALACION.md` - GuÃ­a de instalaciÃ³n
-   `docs/` - DocumentaciÃ³n detallada por carpetas

### Logs y Debugging:

-   Logs detallados en `logs/[fecha]/[feature]/`
-   Screenshots en `evidences/[fecha]/[feature]/`
-   Reportes HTML en `reports/[fecha]_[feature]/`

### Contacto:

-   **QA Team**: qa@zucarmex.com
-   **Tech Lead**: tech-lead@zucarmex.com

## ğŸ¯ Objetivos del Framework

1. **AutomatizaciÃ³n Completa**: Cubrir flujos crÃ­ticos de negocio
2. **Mantenibilidad**: CÃ³digo limpio y reutilizable
3. **Confiabilidad**: Pruebas estables y repetibles
4. **Trazabilidad**: Logs y evidencias detalladas
5. **Escalabilidad**: FÃ¡cil adiciÃ³n de nuevas pruebas
6. **ColaboraciÃ³n**: DocumentaciÃ³n clara para el equipo

---

_Estas reglas aseguran la consistencia y calidad del sistema de automatizaciÃ³n de pruebas de Zucarmex._
